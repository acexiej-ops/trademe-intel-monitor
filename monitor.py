import requests\nimport json\nimport os\nfrom bs4 import BeautifulSoup\n\nURL = 'https://www.trademe.co.nz/a/marketplace/computers/search?search_string=intel&sort_order=expirydesc'\nFILE_NAME = 'seen_listings.json'\n\ndef get_listings():\n    headers = {'User-Agent': 'Mozilla/5.0'}\n    response = requests.get(URL, headers=headers)\n    soup = BeautifulSoup(response.content, 'html.parser')\n    listings = []\n    # Note: Selectors might need adjustment based on Trade Me's actual HTML structure\n    for card in soup.find_all('tm-marketplace-search-card-viewer')[:5]:\n        title_tag = card.find('div', class_='tm-marketplace-search-card__title')\n        link_tag = card.find('a', class_='tm-marketplace-search-card__link')\n        if title_tag and link_tag:\n            listings.append({\n                'title': title_tag.get_text(strip=True),\n                'url': 'https://www.trademe.co.nz' + link_tag['href']\n            })\n    return listings\n\ndef main():\n    if os.path.exists(FILE_NAME):\n        with open(FILE_NAME, 'r') as f:\n            seen = json.load(f)\n    else:\n        seen = []\n\n    current_listings = get_listings()\n    new_listings = [l for l in current_listings if l['url'] not in [s['url'] for s in seen]]\n\n    if new_listings:\n        print(f'Found {len(new_listings)} new listings!')\n        for l in new_listings:\n            print(f\"NEW: {l['title']} - {l['url']}\")\n        \n        # Update seen listings\n        seen.extend(new_listings)\n        with open(FILE_NAME, 'w') as f:\n            json.dump(seen[-50:], f, indent=4)\n    else:\n        print('No new listings found.')\n\nif __name__ == '__main__':\n    main()
